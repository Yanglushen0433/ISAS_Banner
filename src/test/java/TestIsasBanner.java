/**
 * Copyright © 2020 Beijing WINICSSEC Technologies Co.,Ltd. All rights reserved.
 *
 * @PackageName: PACKAGE_NAME
 * @ClassName:TestIsasBanner
 * @author :yice
 * @date:2021/2/2 13:03
 * @Description:
 */

import org.apache.commons.io.FileUtils;
import org.junit.Test;
import org.junit.platform.commons.util.StringUtils;
import org.springframework.scheduling.support.SimpleTriggerContext;

import java.io.File;
import java.io.IOException;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

/**
 * ClassName: TestIsasBanner <br/>
 * date: 2021/2/2 13:03 <br/>
 * @author yice <br/>
 * Description: <br/>
 */
public class TestIsasBanner {
    @Test
    public void StringTest(){
        String banner = "HTTP/1.1 200 OK\\r\\nConnection: close\\r\\nContent-Type: text/html\\r\\nCache-Control: no-cache\\r\\n\\r\\n<meta http-equiv=\\\"Content-Type\\\" content=\\\"text/html; charset=Shift_JIS\\\">\\r\\n\\r\\n<html>\\r\\n<head>\\r\\n<title>Network</title>\\r\\n</head>\\r\\n<noscript>Make sure JavaScript is ON.</noscript>\\r\\n<frameset cols=\\\"0,*\\\" frameborder=\\\"NO\\\" border=\\\"0\\\">\\r\\n<frame src=\\\"top.htm\\\" name=\\\"d\\\">\\r\\n<frame src=\\\"dmy.htm\\\" name=\\\"m\\\">\\r\\n</frameset>\\r\\n<noframes>\\r\\n<body>\\r\\n<a href=\\\"power.htm\\\"></A>\\r\\n</body>\\r\\n</noframes>\\r\\n</html>\\r\\n\\n\\n\\n";
        String title_en="Sanyo PLC-XU300 projector http config";
        String[] title_split = title_en.split(" ");
        System.out.println(title_split.length);
        for(int i=0;i<title_split.length;i++){
            System.out.println(banner.toLowerCase().contains(title_split[i].toLowerCase()));
        }
    }

    @Test
    public void StringRegexTest(){
        //中文厂商匹配
        String title_ch = "HTTP/1.1 200 OK\r\nDate: Wed, 03 Feb 2021 15:55:08 GMT\r\nServer: Apache/2.0.53 (Unix) PHP/5.1.6\\\\r\\\\nX-Powered-By: PHP/5.1.6\\\\r\\\\nSet-Cookie: t300=t300w\\\\r\\\\nSet-Cookie: kindname=tw\\\\r\\\\nSet-Cookie: lang_code=big5\\\\r\\\\nSet-Cookie: m_database=mherp%5E%5Emhscm%5E%5Emhcost%5E%5Emhsal%5E%5Emhacc; path=/\\\\r\\\\nConnection: close\\\\r\\\\nContent-Type: text/html\\\\r\\\\n\\\\r\\\\n<style type=\\\"text/css\\\">\\\\r\\\\nBODY { \\\\r\\\\n\\\\r\\\\n} \\\\r\\\\n<!-- \\\\xa4W\\\\xad\\\\xb1\\\\xacO\\\\xbau\\\\xb0\\\\xca\\\\xb1\\\\xf8\\\\xc3C\\\\xa6\\\\xe2\\\\xb3]\\\\xb8m -->\\\\r\\\\n.t1 a{\\\\r\\\\n        color: #000000;\\\\r\\\\n        TEXT-DECORATION: none;\\\\r\\\\n}\\\\r\\\\n.t1 a:link{\\\\r\\\\n        color: #000000;\\\\r\\\\n        TEXT-DECORATION: none;\\\\r\\\\n}\\\\r\\\\n.t1 a:hover{\\\\r\\\\n     color:#ffffff;\\\\r\\\\n     background-color:#0000ff;\\\\r\\\\n         TEXT-DECORATION: underline;\\\\r\\\\n         }\\\\r\\\\n<!-- \\\\xc3\\\\xec\\\\xb1\\\\xb5\\\\xa4@ -->\\\\r\\\\n.t2 a{\\\\r\\\\n     color:#000000;\\\\r\\\\n         font-size:12px;\\\\r\\\\n         text-decoration:none;\\\\r\\\\n         }\\\\r\\\\n.t2 a:link{\\\\r\\\\n        color: #000000;\\\\r\\\\n        font-size:12px;\\\\r\\\\n        TEXT-DECORATION: none;\\\\r\\\\n}\\\\r\\\\n.t2 a:hover{\\\\r\\\\n     color:#ffffff;\\\\r\\\\n         font-size:12px;\\\\r\\\\n         background-color:#ff0000;\\\\r\\\\n         text-decoration:none;\\\\r\\\\n         }\\\\r\\\\n         <!-- \\\\xc3\\\\xec\\\\xb1\\\\xb5\\\\xa4G -->\\\\r\\\\n.t4 a{\\\\r\\\\n     color:#000000;\\\\r\\\\n         font-size:12px;\\\\r\\\\n         background-color:#FEFEE7;\\\\r\\\\n         text-decoration:none;\\\\r\\\\n         }\\\\r\\\\n.t4 a:link{\\\\r\\\\n        color: #000000;\\\\r\\\\n        font-size:12px;\\\\r\\\\n        background-color:#FEFEE7;\\\\r\\\\n        TEXT-DECORATION: none;\\\\r\\\\n}\\\\r\\\\n.t4 a:hover{\\\\r\\\\n     color:#ffffff;\\\\r\\\\n         font-size:12px;\\\\r\\\\n         background-color:#ff0000;\\\\r\\\\n         text-decoration:none;\\\\r\\\\n         }\\\\r\\\\n.u2 {  border: #000000 double; border-width: 0px 0px 3px}\\\\r\\\\n.u3 {  border:1px dashed #000000 }\\\\r\\\\n.u4 {  font-size:12px;border-bottom:1px double navy;border-color:000000\\\\r\\\\n        }\\\\r\\\\n.trover{\\\\r\\\\n  color:#000000;\\\\r\\\\n  background-color:#00EC00;\\\\r\\\\n}\\\\r\\\\n.trclass1{\\\\r\\\\n  color:#000000;\\\\r\\\\n  background-color:#2DFB4F;\\\\r\\\\n}\\\\r\\\\n.trclass2{\\\\r\\\\n  color:#000000;\\\\r\\\\n  background-color:#FCF6C4;\\\\r\\\\n}\\\\r\\\\n.trclass3{\\\\r\\\\n  color:#000000;\\\\r\\\\n  background-color:#F0FBE9;\\\\r\\\\n}\\\\r\\\\n.trclass4{\\\\r\\\\n  color:#000000;\\\\r\\\\n  background-color:#FFFFFF;\\\\r\\\\n}\\\\r\\\\n.trclass5{\\\\r\\\\n  color:#000000;\\\\r\\\\n  font-weight:900;\\\\r\\\\n  text-decoration:none;\\\\r\\\\n}\\\\r\\\\n<!-- \\\\xc3\\\\xec\\\\xb1\\\\xb5\\\\xa4T -->\\\\r\\\\n.font{\\\\r\\\\nFILTER: dropshadow(color=#cccccc, offx=1, offy=1, positive=1); FONT-FAMILY: \\\"Arial\\\"; FONT-SIZE: 12pt; width:100%; COLOR: #000000;\\\\r\\\\n}\\\\r\\\\n.font2{\\\\r\\\\nFILTER: dropshadow(color=#000000, offx=1, offy=1, positive=1); FONT-FAMILY: \\\"Arial\\\"; FONT-SIZE: 12pt; width:100%; COLOR: #FFFFFF;\\\\r\\\\n}\\\\r\\\\n.good a{\\\\r\\\\nFILTER: dropshadow(color=#FFFFC8, offx=1, offy=1, positive=1); FONT-FAMILY: \\\"Arial\\\"; FONT-SIZE: 12px; width:100%; COLOR: #000000;\\\\r\\\\nTEXT-DECORATION: none;\\\\r\\\\n}\\\\r\\\\n.good a:hover{\\\\r\\\\nFILTER: dropshadow(color=#FFFFC8, offx=1, offy=1, positive=1); FONT-FAMILY: \\\"Arial\\\"; FONT-SIZE: 12px; width:100%; COLOR: #000000;\\\\r\\\\nTEXT-DECORATION: underline;\\\\r\\\\n}\\\\r\\\\n<!-- \\\\xb3\\\\xb1\\\\xbcv\\\\xa4\\\\xe5\\\\xa6r -->\\\\r\\\\n.input_list1 {\\\\r\\\\n        BORDER-RIGHT: #000000 0px solid; BORDER-TOP: #000000 0px solid; FONT-SIZE: 12px; BORDER-LEFT: #000000 0px solid; COLOR: #000000; BORDER-BOTTOM: #000000 0px solid; BACKGROUND-COLOR: transparent\\\\r\\\\n}\\\\r\\\\n\\\\r\\\\n.input_list21 {\\\\r\\\\n        BORDER-RIGHT: #000000 0px solid; BORDER-TOP: #000000 0px solid; FONT-SIZE: 12px; BORDER-LEFT: #000000 0px solid; COLOR: #000000; BORDER-BOTTOM: #000000 0px solid; BACKGROUND-COLOR: transparent\\\\r\\\\n}\\\\r\\\\n.select_list1 {\\\\r\\\\n        BORDER-RIGHT: #669900 1px solid; BORDER-TOP: #669900 1px solid; FONT-SIZE: 12px; BORDER-LEFT: #669900 1px solid; COLOR: #000000; BORDER-BOTTOM: #669900 1px solid; BACKGROUND-COLOR: #FFCC58\\\\r\\\\n}\\\\r\\\\n.button {\\\\r\\\\n        BORDER-RIGHT: #000000 1px solid; BORDER-TOP: #eeeeee 1px solid; FONT-SIZE: 12px; BORDER-LEFT: #eeeeee 1px solid; BORDER-BOTTOM: #000000 1px solid; HEIGHT: 22px; BACKGROUND-COLOR: #eeeeee\\\\r\\\\n}\\\\r\\\\ntd{\\\\r\\\\n   font-size:12px;\\\\r\\\\n   FONT-FAMILY: \\\"Arial\\\";\\\\r\\\\n   }\\\\r\\\\n  .td3{\\\\r\\\\n   font-size:12px;\\\\r\\\\n   font-align:center;\\\\r\\\\n   }\\\\r\\\\n.bgcol{\\\\r\\\\nbackground-color: #DCDCDC;\\\\r\\\\n}\\\\r\\\\n</style>\\\\r\\\\n<STYLE TYPE=\\\"TEXT/CSS\\\">\\\\r\\\\n<!--\\\\r\\\\n.f10     { font-family: Arial; font-size: 12pt }\\\\r\\\\n--> \\\\r\\\\n</STYLE> \\\\r\\\\n<HTML><HEAD><TITLE>Untitled Document</TITLE>\\\\r\\\\n<STYLE type=text/css>BODY {\\\\r\\\\n        SCROLLBAR-FACE-COLOR: #FFF0D9; SCROLLBAR-HIGHLIGHT-COLOR: #F9F9F9; SCROLLBAR-SHADOW-COLOR: #fcfcfc; SCROLLBAR-3DLIGHT-COLOR: #FF9900; SCROLLBAR-ARROW-COLOR: #FF9900; SCROLLBAR-TRACK-COLOR: #fcfcfc; SCROLLBAR-DARKSHADOW-COLOR: #FF9900; SCROLLBAR-BASE-COLOR: #000000\\\\r\\\\n}\\\\r\\\\n.t1 A {\\\\r\\\\n        COLOR: #000000; TEXT-DECORATION: none\\\\r\\\\n}\\\\r\\\\n.t1 A:link {\\\\r\\\\n        COLOR: #000000; TEXT-DECORATION: none\\\\r\\\\n}\\\\r\\\\n.t1 A:hover {\\\\r\\\\n        BACKGROUND-COLOR: #ffffcc; COLOR: #ff0000; TEXT-DECORATION: underline\\\\r\\\\n}\\\\r\\\\n.t2 A {\\\\r\\\\n        COLOR: #000000; FONT-SIZE: 12px; TEXT-DECORATION: none\\\\r\\\\n}\\\\r\\\\n.t2 A:link {\\\\r\\\\n        COLOR: #000000; FONT-SIZE: 12px; TEXT-DECORATION: none\\\\r\\\\n}\\\\r\\\\n.t2 A:hover {\\\\r\\\\n        BACKGROUND-COLOR: #ff0000; COLOR: #ffffff; FONT-SIZE: 12px; TEXT-DECORATION: none\\\\r\\\\n}\\\\r\\\\n.t4 A {\\\\r\\\\n        BACKGROUND-COLOR: #fefee7; COLOR: #000000; FONT-SIZE: 12px; TEXT-DECORATION: none\\\\r\\\\n}\\\\r\\\\n.t4 A:link {\\\\r\\\\n        BACKGROUND-COLOR: #fefee7; COLOR: #000000; FONT-SIZE: 12px; TEXT-DECORATION: none\\\\r\\\\n}\\\\r\\\\n.t4 A:hover {\\\\r\\\\n        BACKGROUND-COLOR: #ff0000; COLOR: #ffffff; FONT-SIZE: 12px; TEXT-DECORATION: none\\\\r\\\\n}\\\\r\\\\n.font {\\\\r\\\\n        COLOR: #000000; FILTER: Microsoft.dropshadow(color=#cccccc, offx=1, offy=1, positive=1); FONT-FAMILY: \\\"Arial\\\"; FONT-SIZE: 9pt; WIDTH: 100%\\\\r\\\\n}\\\\r\\\\n.font2 {\\\\r\\\\n        COLOR: #ffffff; FILTER: Microsoft.dropshadow(color=#000000, offx=1, offy=1, positive=1); FONT-FAMILY: \\\"Arial\\\"; FONT-SIZE: 9pt; WIDTH: 100%\\\\r\\\\n}\\\\r\\\\n.good A {\\\\r\\\\n        COLOR: #000000; FILTER: Microsoft.dropshadow(color=#FFFFC8, offx=1, offy=1, positive=1); FONT-FAMILY: \\\"Arial\\\"; FONT-SIZE: 12px; TEXT-DECORATION: none; WIDTH: 100%\\\\r\\\\n}\\\\r\\\\n.good A:hover {\\\\r\\\\n        COLOR: #000000; FILTER: Microsoft.dropshadow(color=#FFFFC8, offx=1, offy=1, positive=1); FONT-FAMILY: \\\"Arial\\\"; FONT-SIZE: 12px; TEXT-DECORATION: underline; WIDTH: 100%\\\\r\\\\n}\\\\r\\\\n.input_list1 {\\\\r\\\\n        BACKGROUND-COLOR: #ffffff; BORDER-BOTTOM: #000000 1px solid; BORDER-LEFT: #000000 1px solid; BORDER-RIGHT: #000000 1px solid; BORDER-TOP: #000000 1px solid; COLOR: #000000; FONT-SIZE: 12px\\\\r\\\\n}\\\\r\\\\n.select_list1 {\\\\r\\\\n        BACKGROUND-COLOR: #0065d1; BORDER-BOTTOM: #669900 1px solid; BORDER-LEFT: #669900 1px solid; BORDER-RIGHT: #669900 1px solid; BORDER-TOP: #669900 1px solid; COLOR: #ffffff; FONT-SIZE: 12px\\\\r\\\\n}\\\\r\\\\n.button {\\\\r\\\\n        BACKGROUND-COLOR: #eeeeee; BORDER-BOTTOM: #000000 1px solid; BORDER-LEFT: #eeeeee 1px solid; BORDER-RIGHT: #000000 1px solid; BORDER-TOP: #eeeeee 1px solid; FONT-SIZE: 12px; HEIGHT: 22px\\\\r\\\\n}\\\\r\\\\nTD {\\\\r\\\\n        FONT-SIZE: 12px\\\\r\\\\n}\\\\r\\\\n.td3 {\\\\r\\\\n        FONT-SIZE: 12px; font-align: center\\\\r\\\\n}\\\\r\\\\n.bgcol {\\\\r\\\\n        BACKGROUND-COLOR: #dcdcdc\\\\r\\\\n}\\\\r\\\\n</STYLE>\\\\r\\\\n\\\\r\\\\n<STYLE type=TEXT/CSS>.f10 {\\\\r\\\\n        FONT-FAMILY: Arial; FONT-SIZE: 10pt\\\\r\\\\n}\\\\r\\\\n</STYLE>\\\\r\\\\n<META http-equiv=Content-Type content=\\\"text/html;\\\"></HEAD>\\\\r\\\\n<script language=\\\"JavaScript\\\" type=\\\"text/JavaScript\\\">\\\\r\\\\nfunction turnpage()\\\\r\\\\n    { window.navigate(\\\"index.php?m_kind=\\\"+form1.sel_kind.value); }\\\\r\\\\nfunction F_onload() {\\\\r\\\\n   status=\\\\'\\\\';\\\\r\\\\n  try{\\\\r\\\\n    //window.resizeTo(800,600);\\\\r\\\\n        //alert(\\\\'b\\\\');\\\\r\\\\n    resizeTo(screen.availWidth,screen.availHeight)\\\\r\\\\n    moveTo(0,0)\\\\r\\\\n\\\\r\\\\n        var obj = document.all.tags(\\\\'INPUT\\\\');\\\\r\\\\n   for (var i=0;i<obj.length; i++)\\\\r\\\\n    if ((obj[i].type == \\\\'text\\\\' || obj[i].type == \\\\'password\\\\') && !obj[i].readOnly && !obj[i].disabled && obj[i].id != \\\\'m_lqs_ser\\\\') {\\\\r\\\\n          obj[i].focus();\\\\r\\\\n          try{\\\\r\\\\n            obj[i].select();\\\\r\\\\n          }catch(e){}\\\\r\\\\n      break;\\\\r\\\\n    }\\\\r\\\\n  }catch(e){}\\\\r\\\\n\\\\r\\\\n}\\\\r\\\\nwindow.onload = function()\\\\r\\\\n{\\\\r\\\\n  F_onload();\\\\r\\\\n}\\\\r\\\\nfunction F_input(){\\\\r\\\\n  mta=document.form1.user_id.value;\\\\r\\\\n  mtb=document.form1.pass_word.value;\\\\r\\\\n   if ((mta.length<1)) {\\\\r\\\\n   alert(\\\"\\\\xaa\\\\xed\\\\xa5\\\\xbc\\\\xb6\\\\xf1\\\\xa7\\\\xb9\\\\xbe\\\\xe3\\\");\\\\r\\\\n   document.form1.user_id.value=\\\"\\\";\\\\r\\\\n   document.form1.user_id.focus();\\\\r\\\\n   return false;}\\\\r\\\\n   if ((mtb.length<1)) {\\\\r\\\\n   alert(\\\"\\\\xaa\\\\xed\\\\xa5\\\\xbc\\\\xb6\\\\xf1\\\\xa7\\\\xb9\\\\xbe\\\\xe3\\\");\\\\r\\\\n   document.form1.pass_word.value=\\\"\\\";\\\\r\\\\n   document.form1.pass_word.focus();\\\\r\\\\n   return false;}\\\\r\\\\n}\\\\r\\\\nvar temp\\\\r\\\\nvar f = \\\"                              \\\"\\\\r\\\\nvar f = f + \\\"WELCOME TO . \\\\xb8g\\\\xbeP\\\\xb0\\\\xd3\\\\xa1\\\\xd0\\\\xb6i\\\\xbeP\\\\xa6s\\\\xa8t\\\\xb2\\\\xce \\\"\\\\r\\\\nvar speedtogo = 100\\\\r\\\\nvar counter\\\\r\\\\nfunction scrollon() {\\\\r\\\\n        \\\\r\\\\n   temp  = f.substring(0,1);\\\\r\\\\n   f += temp\\\\r\\\\n   f    = f.substring(1,f.length);\\\\r\\\\n   document.form1.display.value = f.substring(0,55);\\\\r\\\\n  \\\\r\\\\n  counter    = setTimeout(\\\"scrollon()\\\",speedtogo);\\\\r\\\\n\\\\r\\\\n }\\\\r\\\\n\\\\r\\\\n</script>\\\\r\\\\n<BODY leftMargin=0 topMargin=0 marginheight=\\\"0\\\" marginwidth=\\\"0\\\" >\\\\r\\\\n <TABLE cellSpacing=0 cellPadding=0  border=0   align=center  width=\\\"800\\\" background=image/bg2.gif height=\\\"450\\\"><form name=\\\"form1\\\" method=\\\"post\\\" action=\\\"login3.php\\\" > <tr><td height=\\\"2\\\" colspan=2 width=\\\"806\\\"></td></tr>\\\\r\\\\n  <td height=\\\"1\\\" colspan=3 width=\\\"800\\\"><img src=image/spacer.gif width=1 height=13>\\\\r\\\\n <tr><td height=\\\"149\\\" colspan=3 width=\\\"800\\\"><img src=image/m02.jpg width=800 height=140></td></tr>\\\\r\\\\n <tr><td height=\\\"1\\\" colspan=3 width=\\\"800\\\"><img src=image/spacer.gif width=1 height=5></td></tr>\\\\r\\\\n <tr><td height=\\\"256\\\" rowspan=2 width=\\\"489\\\"><img src=image/m04.gif width=489 height=175></td><td width=\\\"320\\\">\\\\r\\\\n    <p><font class=\\\"font\\\" size=\\\"2\\\"><strong><font color=\\\"#FFFFFF\\\">UserID:</font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \\\\r\\\\n    </strong></font><input class=\\\"input_list1\\\" onMouseOver=\\\"this.style.backgroundColor=\\\\'#FFFF00\\\\'\\\" onMouseOut=\\\"this.style.backgroundColor=\\\\'#ffffff\\\\'\\\" name=\\\"user_id\\\" type=\\\"text\\\" id=\\\"user_id\\\" size=\\\"16\\\" maxlength=\\\"20\\\"></p>\\\\r\\\\n    <p><font class=\\\"font\\\" size=\\\"2\\\"><strong><font color=\\\"#FFFFFF\\\">Password:</font>&nbsp;&nbsp;&nbsp;  \\\\r\\\\n    </strong></font><input class=\\\"input_list1\\\" onMouseOver=\\\"this.style.backgroundColor=\\\\'#FFFF00\\\\'\\\" onMouseOut=\\\"this.style.backgroundColor=\\\\'#ffffff\\\\'\\\" name=\\\"pass_word\\\" type=\\\"password\\\" id=\\\"pass_word\\\" size=\\\"16\\\" maxlength=\\\"20\\\"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <input class=\\\"button\\\" type=\\\"submit\\\" name=\\\"Submit\\\" value=\\\"Enter\\\">   \\\\r\\\\n    </p>\\\\r\\\\n  </td>\\\\r\\\\n                    <td height=\\\"45\\\" width=\\\"1\\\">\\\\r\\\\n                      <p></p></td></tr><tr>\\\\r\\\\n    <td width=\\\"320\\\">\\\\r\\\\n                    <td height=\\\"24\\\" width=\\\"1\\\"> </tr></form></TABLE></BODY></HTML>\\\\r\\\\n\\n\\n\\n";
        //^HTTP/1.0 ((.)+[ \f\n\r\t\v])+
        //^HTTP/1.0 (.)+[ \f\n\r\t\v](([A-Za-z]+:[A-Za-z0-9,:\.\/-\s]+[\f\n\r\t\v])+)
        //^HTTP/1.0 (.)+[ \f\n\r\t\v](([A-Za-z-]+:[^<]+[\f\n\r\t\v])+)
        String HttpResponseHeader="^(HTTP/1.0 .+[\\f\\n\\r\\t\\v])([A-Za-z-]+:[^<]+[\\f\\n\\r\\t\\v])+";
        String HTTPhtmlHeaderTitleRegex = "<title>(([\\u4E00-\\u9FA5A-Za-z0-9_\\-\\s])+)</title>";
        Pattern r = Pattern.compile(HttpResponseHeader);
        Matcher m = r.matcher(title_ch);
        if (m.find()) {
            System.out.println(m.group(1));
        }
    }


    @Test
    public void splitTest() throws IOException {
        List<String> readLines = FileUtils.readLines(new File("src/test/inputUrl/test.txt"));
        List<Map<String,String>> titles = new ArrayList<>();

        for (String line : readLines){
            Map<String,String> titel = new HashMap<>();
            titel.put("zh",line.split(",")[0]);
            titel.put("en",line.split(",")[1]);
            titles.add(titel);
        }
        System.out.println(titles);
    }
}
